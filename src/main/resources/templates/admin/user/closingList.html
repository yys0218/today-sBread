<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{admin/adminLayout}">

<head>
  <meta charset="UTF-8">
  <title>폐점 신청 목록</title>

  <link rel="stylesheet" th:href="@{/css/admin/closing.css}">
</head>

<div layout:fragment="content" class="closing-list">
  <h2 class="admin-title">폐점 현황</h2>

  <!-- 테이블 -->
  <table class="admin-table">
    <tr>
      <th>번호</th>
      <th>빵집 이름</th>
      <th>영업 기간</th>
      <th>폐점 사유</th>
      <th>폐점 일시</th>
    </tr>
    <tr th:each="shop, stat : ${paging}">
      <td th:text="${paging.totalElements - (paging.number * paging.size + stat.index)}"></td>
      <td th:text="${shop.shopName}"></td>
      <td th:text="${operatingDaysMap[shop.shopNo]} + '일'"></td>
      <td th:switch="${shop.closingReason}">
        <span th:case="0">개인 사정</span>
        <span th:case="1">경영 문제</span>
        <span th:case="2">플랫폼 관련</span>
        <span th:case="3">기타</span>
      </td>
      <span th:if="${shop.closingReasonDetail != null and shop.closingReasonDetail != ''}">
        (<span th:text="${shop.closingReasonDetail}"></span>)
      </span>
      </td>
      <td th:text="${#temporals.format(shop.closingAt, 'yyyy-MM-dd HH:mm')}"></td>
    </tr>
  </table>

  <!-- 페이징 처리 -->
  <div th:if="${!paging.isEmpty()}">
    <ul class="pagination justify-content-center">
      <span class="page-item" th:if="${paging.hasPrevious()}">
        <a class="page-link" th:href="@{|?page=${paging.number-1}|}">
          <span>이전</span>
        </a>
      </span>
      <span th:each="page:${#numbers.sequence(0, paging.totalPages-1)}"
        th:if="${page >= paging.number-5 and page <= paging.number+5}"
        th:classappend="${page==paging.number} ? 'active'" class="page-item">
        <a th:text="${page+1}" class="page-link"
          th:href="@{/admin/user/closing/list(startDate=${result}, page=${i}, size=${size})}"></a>
      </span>
      <span class="page-item" th:if="${paging.hasNext()}">
        <a class="page-link" th:href="@{|?page=${paging.number+1}|}">
          <span>다음</span>
        </a>
      </span>
    </ul>
  </div>
  <!-- 페이징 처리 끝 -->



</div>

</html>