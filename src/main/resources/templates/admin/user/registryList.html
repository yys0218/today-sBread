<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{admin/adminLayout}">

<head>
  <meta charset="UTF-8">
  <title>입점 신청 목록</title>
  <link rel="stylesheet" th:href="@{/css/admin/registry.css}">
</head>

<div layout:fragment="content" class="registry-list">
  <h2 class="admin-title">입점 신청 목록</h2>

  <!-- 필터 (A/Y/N/C 전체 보기) -->
  <div class="filter-bar">
    <a th:href="@{/admin/user/registry/list(result='')}" th:classappend="${result == ''} ? 'active'">전체</a>
    <a th:href="@{/admin/user/registry/list(result='A')}" th:classappend="${result == 'A'} ? 'active'">미답변</a>
    <a th:href="@{/admin/user/registry/list(result='Y')}" th:classappend="${result == 'Y'} ? 'active'">승인</a>
    <a th:href="@{/admin/user/registry/list(result='N')}" th:classappend="${result == 'N'} ? 'active'">거절</a>
    <a th:href="@{/admin/user/registry/list(result='C')}" th:classappend="${result == 'C'} ? 'active'">자진철회</a>
  </div>

  <!-- 테이블 -->
  <table class="admin-table">
    <thead>
      <tr>
        <th>번호</th>
        <th>신청 결과</th>
        <th>거절 사유</th>
        <th>매장 이름</th>
        <th>신청일자</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="shop : ${paging}"
        th:onclick="|location.href='@{/admin/user/registry/detail/{shopNo}(shopNo=${shop.shopNo}, page=${page}, result=${result})}'|"
        style="cursor:pointer;">
        <td th:text="${shop.shopNo}"></td>
        <td>
          <span th:switch="${shop.shopRegResult}">
            <span th:case=null>승인대기</span>
            <span th:case="Y">승인</span>
            <span th:case="N">거절</span>
            <span th:case="C">자진철회</span>
          </span>
        </td>
        <td>
          <span th:switch="${shop.shopRegReason}">
            <span th:case="0">필수 서류 미비</span>
            <span th:case="1">자격 요건 불충족</span>
            <span th:case="2">품질 기준 미달</span>
            <span th:case="3">중복/허위 기재</span>
          </span>
        </td>
        <td th:text="${shop.shopName}">빵집이름</td>
        <td th:text="${#temporals.format(shop.shopRegAt, 'yyyy-MM-dd HH:mm')}">2025-09-02 10:00</td>
      </tr>
      <tr th:if="${#lists.isEmpty(paging)}">
        <td colspan="5">입점 신청 내역이 없습니다.</td>
      </tr>
    </tbody>
  </table>

  <!-- 페이징 처리 -->
  <div th:if="${!paging.isEmpty()}">
    <ul class="pagination justify-content-center">

      <!-- 이전 -->
      <span class="page-item" th:if="${paging.hasPrevious()}">
        <a class="page-link" th:href="@{|/admin/user/registry/list?page=${paging.number-1}&result=${result}|}">
          <span>이전</span>
        </a>
      </span>

      <!-- 번호 -->
      <span th:each="page : ${#numbers.sequence(0, paging.totalPages-1)}"
        th:if="${page >= paging.number-5 and page <= paging.number+5}"
        th:classappend="${page==paging.number} ? 'active'" class="page-item">
        <a th:text="${page+1}" class="page-link"
          th:href="@{|/admin/user/registry/list?page=${page}&result=${result}|}"></a>
      </span>

      <!-- 다음 -->
      <span class="page-item" th:if="${paging.hasNext()}">
        <a class="page-link" th:href="@{|/admin/user/registry/list?page=${paging.number+1}&result=${result}|}">
          <span>다음</span>
        </a>
      </span>

    </ul>
  </div>
  <!-- 페이징 처리 끝 -->
</div>

</html>