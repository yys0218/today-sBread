<!-- 상품 리스트 출력용 Fragment -->
<!-- 사용할 곳에서 th:replace= "~{페이지위치+페이지명 :: th:fragment명}" -->
<!-- <th:block th:replace="~{rider/orderFragment(페이지위치+페이지명) :: orderList(th:fragment명)}"></th:block> -->
<th:block id="orderList" th:fragment="orderList">
    <th:block th:if="${#lists.isEmpty(list)}">
        <div class="end-text">불러올 게시글이 없습니다.</div>
    </th:block>
    <!-- 리스트가 비어있지 않을때-->

    <th:block th:unless="${#lists.isEmpty(list)}" th:each="item , itemStat : ${list}">
        <div th:classappend="${itemStat.index == 0} ? 'active-card'" class="order-card" th:attr="data-order-no=${item.orderNo}">
            <!-- 상단 -->
            <div class="order-header">
                <span class="order-no" th:text="'#'+${item.orderNo}">#100</span>
                <!-- 해당 주문의 상태에 따라 출력값과 주문에 해당하는 시간의 띄워주기 위함.-->
                <th:block th:switch="${item.status}">
                    <th:block th:case="2">
                        <span class="order-time" th:text="${#temporals.format(item.orderTime.requestedAt,'yyyy-MM-dd hh:mm:ss')}">2025-08-18 12:12:11</span>
                        <span class="order-status 대기">대기</span>
                    </th:block>

                    <th:block th:case="3">
                        <span class="order-time" th:text="${#temporals.format(item.orderTime.assignedAt,'yyyy-MM-dd hh:mm:ss')}">2025-08-18 12:12:11</span>
                        <span class="order-status 수락">수락</span>
                    </th:block>

                    <th:block th:case="4">
                        <span class="order-time" th:text="${#temporals.format(item.orderTime.pickupAt,'yyyy-MM-dd hh:mm:ss')}">2025-08-18 12:12:11</span>
                        <span class="order-status 배송중">배송중</span>
                    </th:block>

                    <th:block th:case="5">
                        <span class="order-time" th:text="${#temporals.format(item.orderTime.completedAt,'yyyy-MM-dd hh:mm:ss')}">2025-08-18 12:12:11</span>
                        <span class="order-status 배송완료">배송완료</span>
                    </th:block>
                </th:block>
                <div class="order-price">
                    <span class="distance" th:attr="data-lat=${item.shop.latitude}, data-lng=${item.shop.longitude}, data-shopName=${item.shop.shopName}">0km</span>
                    <span class="fee" th:text="${#numbers.formatInteger(item.deliveryFee,3,'COMMA')}+'원'">5,500원</span>
                </div>
            </div>
            <!-- 중단 -->
            <div class="order-body">
                <div class="d-flex flex-column">
                    <div class="payment">선결제</div>
                    <div class="details">
                        <span th:text="${#numbers.formatInteger(item.orderPrice,3,'COMMA')}+원">주문 금액</span>
                    </div>
                </div>
                <div class="d-flex flex-column">
                    <div>판매지</div>
                    <th:block th:if="${item.status != 2 and item.rider != null and item.rider.memberNo != #authentication.principal.member.memberNo}">
                        <div class="orderAddress" th:text="${@stringUtil.maskAddress(item.shop.shopAddress)}">서울특별시 관악구 남부순환로 1820 6층 글로벌아이티 6B</div>
                    </th:block>
                    <th:block th:unless="${item.status != 2 and item.rider != null and item.rider.memberNo != #authentication.principal.member.memberNo}">
                        <div class="orderAddress" th:text="${item.shop.shopAddress}">서울특별시 관악구 남부순환로 1820 6층 글로벌아이티 6B</div>
                    </th:block>
                </div>
                <div class="d-flex flex-column">
                    <div>배송지</div>
                    <th:block th:if="${item.status != 2 and item.rider != null and item.rider.memberNo != #authentication.principal.member.memberNo}">
                        <div class="orderAddress" th:text="${@stringUtil.maskAddress(item.orderAddress)}">서울특별시 관악구 남부순환로 1820 6층 글로벌아이티 6B</div>
                    </th:block>
                    <th:block th:unless="${item.status != 2 and item.rider != null and item.rider.memberNo != #authentication.principal.member.memberNo}">
                        <div class="orderAddress" th:text="${item.orderAddress}">서울특별시 관악구 남부순환로 1820 6층 글로벌아이티 6B</div>
                    </th:block>
                </div>
                <th:block th:if="${item.status == 2}">
                    <button class="accept-btn">접수 →</button>
                </th:block>
                <th:block th:if="${item.status == 3 && item.rider.memberNo == #authentication.principal.member.memberNo}">
                    <button class="shop-btn">매장 위치</button>
                    <button type="button" class="pickup-btn">픽업 완료</button>
                </th:block>
                <th:block th:if="${item.status == 4 && item.rider.memberNo == #authentication.principal.member.memberNo}">
                    <button class="delivery-btn">목적지 위치</button>
                    <button type="button" class="complete-btn">배송 완료</button>
                </th:block>
                <th:block th:unless="${item.status == 2}">
                    <button class="accept-btn"></button>
                </th:block>
            </div>

            <!-- 하단 -->
            <div class="order-footer"></div>
        </div>
    </th:block>
</th:block>
